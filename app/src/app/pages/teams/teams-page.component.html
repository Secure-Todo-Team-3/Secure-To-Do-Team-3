<main class="teams-page">
  <div *ngIf="isLoading" class="loading-overlay">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <!-- Actions at the top of the page -->
  <div class="page-actions" *ngIf="!isLoading">
    <!-- This button now opens the dialog to add a user to a team -->
    <button mat-stroked-button color="primary" (click)="openAddUserDialog()">
      <mat-icon>person_add</mat-icon>
      Add User to Team
    </button>
  </div>

  <mat-tab-group *ngIf="!isLoading" animationDuration="500ms">
    <mat-tab label="My Teams ({{ myTeams.length }})">
      <section class="team-section">
        <ul class="team-list my-teams-list">
          <li *ngFor="let team of myTeams">
            <app-team-card [team]="team"></app-team-card>
          </li>
        </ul>
        <div *ngIf="myTeams.length === 0" class="empty-state">
          <p>You haven't created or lead any teams yet.</p>
        </div>
      </section>
    </mat-tab>

    <mat-tab label="Joined Teams ({{ joinedTeams.length }})">
      <section class="team-section">
        <ul class="team-list">
          <li *ngFor="let team of joinedTeams">
            <app-team-card [team]="team"></app-team-card>
          </li>
        </ul>
        <div *ngIf="joinedTeams.length === 0" class="empty-state">
          <p>You haven't joined any teams yet.</p>
        </div>
      </section>
    </mat-tab>
  </mat-tab-group>

  <!-- This FAB is for creating a brand new team -->
  <button
    mat-fab
    color="primary"
    aria-label="Add Team"
    class="add-team-fab"
    (click)="addTeam()"
  >
    <mat-icon>add</mat-icon>
  </button>
</main>