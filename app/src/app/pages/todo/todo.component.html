<main class="dashboard">
  <section class="controls-container">
    <section class="search">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search tasks...</mat-label>
        <input
          maxlength="30"
          matInput
          type="text"
          [(ngModel)]="searchTerm"
          (ngModelChange)="searchTasks()"
        />
        <button mat-icon-button matSuffix (click)="searchTasks()">
          <mat-icon>search</mat-icon>
        </button>
      </mat-form-field>
    </section>

    <section class="filters">
      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Status</mat-label>
        <mat-select
          [(ngModel)]="selectedStatus"
          (selectionChange)="searchTasks()"
        >
          <mat-option value="all">All Status</mat-option>
          <ng-container *ngFor="let status of statuses">
            <mat-option [value]="status.name">{{ status.name }}</mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Teams</mat-label>
        <mat-select
          [(ngModel)]="selectedTeam"
          (selectionChange)="searchTasks()"
        >
          <mat-option value="all">All Teams</mat-option>
          <ng-container *ngFor="let team of teams">
            <mat-option [value]="team.name">{{ team.name }}</mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>
    </section>
  </section>

  <section class="task-list">
    <app-task-card *ngFor="let task of tasks" [task]="task"></app-task-card>
  </section>

  <ng-template [ngIf]="!tasks || tasks.length === 0">
    <div class="no-tasks-message">
      <mat-icon>info</mat-icon>
      <p>You don't have tasks yet.</p>
    </div>
  </ng-template>

  <button mat-fab color="primary" class="add-task-fab" (click)="addTask()">
    <mat-icon>add</mat-icon>
  </button>
</main>
