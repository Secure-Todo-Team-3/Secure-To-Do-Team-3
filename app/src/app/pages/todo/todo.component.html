<main class="dashboard">
  <header class="dashboard-header">
    <section class="search-section">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search tasks...</mat-label>
        <input
          maxlength="30"
          matInput
          type="text"
          [(ngModel)]="searchTerm"
          (ngModelChange)="searchTasks()"
        />
        <button mat-icon-button matSuffix (click)="searchTasks()">
          <mat-icon>search</mat-icon>
        </button>
      </mat-form-field>
    </section>

    <section class="filters-section">
      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="selectedStatus" (selectionChange)="searchTasks()">
          <mat-option value="all">All Status</mat-option>
          <ng-container *ngFor="let status of statuses">
            <mat-option [value]="status.name">{{ status.name }}</mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Teams</mat-label>
        <mat-select [(ngModel)]="selectedTeam" (selectionChange)="searchTasks()">
          <mat-option value="all">All Teams</mat-option>
          <ng-container *ngFor="let team of teams">
            <mat-option [value]="team.name">{{ team.name }}</mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>

      <button mat-flat-button color="primary" type="button" (click)="addTask()">
        <mat-icon>add</mat-icon>
        Add Task
      </button>
    </section>
  </header>

  <section aria-labelledby="tasks-tasks">
    <h2 id="pending-tasks" class="section-heading">
      <mat-icon color="warn" class="heading-icon">task</mat-icon>
      My Tasks ({{ tasks.length }})
    </h2>

    <section class="task-list">
      <app-task-card
        *ngFor="let task of tasks"
        [task]="task"
      ></app-task-card>
    </section>
  </section>
</main>
